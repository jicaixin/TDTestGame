# Milestone 1 任务清单
# 核心循环 MVP (最小可玩版本)

## 目标
建立最基础的游戏循环，可以完成一轮游戏体验。

---

## 阶段 1: 项目初始化

### 1.1 Unity项目创建
- [ ] 创建Unity 2D项目 `TDTestGame`
- [ ] 设置项目目录结构
- [ ] 配置2D相机和场景

### 1.2 目录结构创建
```
Assets/
├── Scenes/
│   ├── Main.unity           (主菜单场景)
│   ├── LevelSelect.unity    (关卡选择场景)
│   └── GameScene.unity      (游戏场景)
├── Scripts/
│   ├── Core/                (核心系统)
│   ├── Towers/              (塔相关)
│   ├── Enemies/             (怪物相关)
│   ├── UI/                  (UI控制器)
│   └── Data/                (数据结构)
├── Prefabs/
│   ├── Towers/
│   ├── Enemies/
│   └── UI/
├── Sprites/                 (美术资源)
└── Materials/
```

### 1.3 基础场景设置
- [ ] 创建GameScene场景
- [ ] 设置Main Camera为Orthographic
- [ ] 调整相机Size (如10)
- [ ] 设置背景色

---

## 阶段 2: 游戏区域与路径

### 2.1 地面网格
- [ ] 创建地面Tilemap或Sprite网格
- [ ] 设置网格大小 (如1x1单位)
- [ ] 区分可建造区域和路径区域

### 2.2 路径系统
- [ ] 创建路径Waypoint系统
- [ ] 定义起点和终点
- [ ] 创建测试路径 (至少3个弯折点)
- [ ] 用不同颜色绘制路径可视化

### 2.3 基地与生命值
- [ ] 创建基地Sprite (终点)
- [ ] 显示生命值文本
- [ ] 生命值归零检测

---

## 阶段 3: 怪物系统

### 3.1 基础怪物
- [ ] 创建Enemy脚本
- [ ] 实现沿路径移动逻辑
- [ ] 怪物到达终点扣血逻辑
- [ ] 怪物死亡销毁逻辑

### 3.2 怪物预制体
- [ ] 创建简单怪物Sprite (红色方块)
- [ ] 配置怪物属性:
  - 血量: 50
  - 速度: 1.0
  - 奖励金币: 10
  - 奖励经验: 15
- [ ] 创建Enemy Prefab

### 3.3 怪物生成器
- [ ] 创建EnemySpawner脚本
- [ ] 实现单波次生成逻辑
- [ ] 配置:
  - 怪物数量: 5个
  - 生成间隔: 2秒

---

## 阶段 4: 防御塔系统

### 4.1 基础防御塔
- [ ] 创建Tower基类
- [ ] 实现攻击范围检测
- [ ] 实现自动攻击最近敌人
- [ ] 创建弹道/攻击效果

### 4.2 塔的属性
- [ ] 伤害: 20
- [ ] 攻速: 1次/秒
- [ ] 范围: 3格
- [ ] 建造费用: 50金币

### 4.3 塔预制体
- [ ] 创建基础塔Sprite (蓝色方块)
- [ ] 创建Tower Prefab
- [ ] 添加攻击范围可视化 (CircleCollider2D)

### 4.4 塔的放置
- [ ] 创建Grid系统检测可建造位置
- [ ] 点击格子显示放置菜单
- [ ] 扣除金币并放置塔
- [ ] 防止重复放置同一位置

---

## 阶段 5: 战斗系统

### 5.1 攻击逻辑
- [ ] 塔检测范围内的敌人
- [ ] 选择最近敌人作为目标
- [ ] 发射弹道/造成伤害
- [ ] 怪物血量减少逻辑

### 5.2 伤害飘字
- [ ] 创建伤害数字显示
- [ ] 攻击时飘出伤害数值
- [ ] 2秒后消失

### 5.3 击杀奖励
- [ ] 怪物死亡时增加金币
- [ ] 怪物死亡时增加经验 (M1阶段可暂不实现升级)

---

## 阶段 6: 游戏管理

### 6.1 GameManager
- [ ] 创建GameManager脚本
- [ ] 管理游戏状态:
  - 准备阶段
  - 波次进行中
  - 波次结束
  - 胜利
  - 失败
- [ ] 管理全局数据:
  - 生命值
  - 金币
  - 等级 (M1固定为1)
  - 当前波次

### 6.2 波次管理
- [ ] 创建WaveManager脚本
- [ ] 管理波次开始/结束
- [ ] 检测所有怪物被消灭
- [ ] 触发胜利条件

### 6.3 金币系统
- [ ] 显示金币UI
- [ ] 金币变化时更新UI
- [ ] 初始金币: 100

---

## 阶段 7: 基础UI

### 7.1 顶部信息栏
- [ ] 显示生命值 (❤️ 20)
- [ ] 显示波次 (🌊 1/1)
- [ ] 显示金币 (💰 100)

### 7.2 底部控制栏
- [ ] 塔选择按钮 (显示塔图标和价格)
- [ ] "开始波次"按钮
- [ ] "退出"按钮

### 7.3 弹窗UI
- [ ] 胜利界面
  - "胜利!"文字
  - "继续"按钮 (返回菜单)
- [ ] 失败界面
  - "失败!"文字
  - "重试"按钮
  - "退出"按钮

---

## 阶段 8: 测试与调试

### 8.1 功能测试
- [ ] 可以放置塔
- [ ] 塔自动攻击怪物
- [ ] 怪物沿路径移动
- [ ] 怪物到达终点扣血
- [ ] 击杀怪物获得金币
- [ ] 所有怪物消灭后显示胜利
- [ ] 生命值归零显示失败

### 8.2 数值调整
- [ ] 调整怪物血量/速度使游戏平衡
- [ ] 调整塔的伤害/攻速
- [ ] 调整金币数量使经济合理

### 8.3 Bug修复
- [ ] 修复塔不能放置的bug
- [ ] 修复怪物卡在路径的bug
- [ ] 修复攻击范围显示错误的bug

---

## 验收标准

**必须完成**:
- [x] 可在路径旁放置至少1个防御塔
- [x] 怪物从起点出发，沿路径移动到终点
- [x] 防御塔自动攻击范围内的怪物
- [x] 怪物被击杀后消失并掉落金币
- [x] 怪物到达终点扣除生命值
- [x] 清空所有怪物后显示"胜利"界面
- [x] 生命值归零显示"失败"界面

**加分项** (非必须，但建议):
- [ ] 塔有简单的攻击动画
- [ ] 伤害数字飘字效果
- [ ] 塔的攻击范围可视化
- [ ] 建造塔时有音效

---

## 临时素材方案 (M1阶段)

使用简单的几何图形和颜色:

- **塔**: 蓝色正方形 (1x1单位)
- **怪物**: 红色圆形 (0.5x0.5单位)
- **路径**: 深灰色长方形
- **地面**: 浅灰色方块
- **基地**: 绿色正方形
- **可建造区域**: 半透明黄色高亮

---

## 预计时间
- 阶段1-2: 2小时
- 阶段3: 3小时
- 阶段4: 4小时
- 阶段5-6: 3小时
- 阶段7: 2小时
- 阶段8: 2小时
- **总计**: 约16小时 (2-3个工作日)

---

## 完成标志
✅ **当你能够玩一整轮游戏（放置塔 → 开始波次 → 怪物进攻 → 全部消灭 → 胜利）时，Milestone 1就完成了！**

---

*最后更新: 2025-02-01*
